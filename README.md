# WireGuard Easy Deploy

This repository contains a set of scripts to easily deploy and manage a WireGuard VPN server on a Linux VPS.

It is guaranteed to work if you push/download the folder directly to the VPS and run the scripts on the server itself.

## Prerequisites

*   A Linux VPS (tested on Debian/Ubuntu).
*   SSH access to the VPS as a user with sudo privileges (or as root).

## How to Use

### 1. Configure the Server

You can configure the server in two ways:

#### a) Automatic Configuration (Recommended)

Run the `auto_config.sh` script to automatically detect your server's public IP address and network interface.

```bash
./auto_config.sh
```

This will update the `config.sh` file with the detected values.

#### b) Manual Configuration

If automatic detection fails, or if you want to use custom settings, you can manually edit the `config.sh` file.

```bash
# The public IP address of your VPS.
SERVER_PUBLIC_IP="YOUR_SERVER_IP"
# The public network interface of your VPS.
SERVER_PUBLIC_NIC="eth0"
# ... and other settings.
```

### 2. Deploy the WireGuard Server

Once you have configured `config.sh`, you can run the deployment script. This will connect to your VPS via SSH and set up the WireGuard server.

```bash
./deploy.sh
```

The script will:
*   Install WireGuard.
*   Configure the server's firewall (iptables).
*   Start the WireGuard service.
*   It will also open the WireGuard UDP port (defined as `SERVER_WG_PORT` in `config.sh`) in the server's `iptables` firewall.

### 3. Manage Users

You can create and remove users with the `manage-user.sh` script.

#### Create a User

To create a new user, run:

```bash
./manage-user.sh create <username>
```

Replace `<username>` with the desired username. The script will create a client configuration file (`<username>.conf`) in the `client_configs` directory.

#### Remove a User

To remove a user, run:

```bash
./manage-user.sh remove <username>
```

This will remove the user from the server and delete their local configuration file.

## Client Configuration

The primary way to configure a WireGuard client is by using the `.conf` file generated by the `manage-user.sh` script.

### Using the .conf File

1.  After creating a user, you will find their configuration file in the `client_configs` directory (e.g., `client_configs/my-laptop.conf`).
2.  Transfer this file to the device you want to connect to the VPN. You can use email, a cloud storage service, or a USB drive.
3.  In the official WireGuard application (on Android, iOS, Windows, macOS, or Linux), use the "Import tunnel(s) from file" option and select the `.conf` file.

### Using a QR Code (Optional)

For mobile clients, a QR code can be a convenient way to import the configuration.

If you have `qrencode` installed on your local machine, a QR code will be displayed when you create a user. You can scan this code with the WireGuard mobile app to instantly set up the client.

To install `qrencode` on Debian/Ubuntu:
```bash
sudo apt-get install qrencode
```
